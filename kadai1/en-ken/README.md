# 課題1

## 次の仕様を満たすコマンドを作って下さい

- [x] ディレクトリを指定する
- [x] 指定したディレクトリ以下のJPGファイルをPNGに変換 (デフォルト)
- [x] ディレクトリ以下は再帰的に処理する
- [ ] 変換前と変換後の画像形式を指定できる (オプション)

## 以下を満たすように開発してください

- [x] mainパッケージと分離する
- [x] 自作パッケージと標準パッケージと準標準パッケージのみ使う
- [x] 準標準パッケージ：golang.org/x以下のパッケージ
- [x] ユーザ定義型を作ってみる
- [ ] GoDocを生成してみる

## 使い方

```:go
go build -o kadai1
./kadai1 INPUT_DIR -input-ext [input extension(.jpg/.png)] -output-dir [output directory] -output-ext [output extension(.jpg/.png)]
```

- `-output-dir`は指定されない場合、`INPUT_DIR`に出力される。
- 出力ディレクトリには、`INPUT_DIR`の各処理ファイルと同じディレクトリ構造を保った形で出力される。

## ハマったところ

- os.FileInfoをスライスにappendして返したらヌルポになった。
  - ポインタで渡そうにもinterfaceだし、どうやって渡す？
  - ひとまずファイルパスだけ返してごまかした。
- go testが最初うまく走らなかった。
  - modファイルができてから動くようになった？
- `INPUT_DIRECTORY`を`-output-dir`のデフォルト値に取りたかった関係で、`INPUT_DIRECTORY`を第一引数に取る形にした。
  - よく考えると`-help`などするとき変なことになる...
- cliのテストをするために結構無駄な構造を作る羽目になってしまった。
  - テストはgolang.org/x以下じゃなくてもセーフという解釈で、gomock使っている。
  - コンストラクタでmockに入れ替える以外でスタブを差し込む方法がわからなかった。
    - DIコンテナとか、あまり一般的ではない？
  - 上から差し込むためにFactoryクラスを作ったが、実装上あまり意味がない構造をテストのために作ってしまい、ちょっと気持ち悪い。
    - package自体のinterfaceってないのだろうか。
- GoDocの生成というのがよくわからなかった。masterにマージされればできる？
- go.modとかgo.sumとかなんとなくバージョン管理のためのものなのだと思うがよくわかっていない。
