# 課題3-2

## 分割ダウンローダを作ろう

- Rangeアクセスを用いる
- いくつかのゴルーチンでダウンロードしてマージする
- エラー処理を工夫する
  - golang.org/x/sync/errgroupパッケージなどを使ってみる
- キャンセルが発生した場合の実装を行う

## やること

1. HEADリクエストしてAccept-Rangesヘッダの有無確認
1. Accept-Rangesがあった場合、
    1. 任意の分割数に応じて、goroutineごとの割当範囲を決めて、各goroutineでRange GET
    1. 部分ファイルに出力
1. 全部ダウンロードできたら、ファイルをマージして部分ファイル削除

## 工夫した点

- 1つのgoroutineがダウンロードするデータが1MBを超えた場合、1MBごとにファイル出力するようにした。
- すでにダウンロード済のデータがあった場合(そのパートのファイルがあった場合)、それを再利用する。
